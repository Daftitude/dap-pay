<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Sign Up | DAP⚡Pay</title>

  <!-- Link to external CSS -->
  <link rel="stylesheet" href="CSS/style.css">

  <!-- Meta for mobile responsiveness -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>

<!-- Particle background effect -->
<div id="particles-js"></div>

<!-- Signup Card -->
<div class="card dashboard-card" style="padding: 40px 30px; margin-top: 80px;">
  <div class="dap-logo">DAP⚡Pay</div>

  <h1 class="welcome-text">🚀 Get Started with DAP⚡Pay</h1>
  <p class="subtitle-text">Secure your handle and join the game!</p>

  <!-- Sign Up Form -->
  <form id="signup-form" onsubmit="submitForm(); return false;" style="margin-top: 30px;">

    <!-- Claim Your Handle -->
    <label for="username">🔥 Claim Your DAP⚡Pay Handle</label>
    <input type="text" id="username" placeholder="Choose your @handle" required>

    <!-- Email Field -->
    <label for="email" style="margin-top: 20px;">📧 Enter Your Email</label>
    <input type="email" id="email" placeholder="you@example.com" required>

    <!-- Password Field -->
    <label for="password" style="margin-top: 20px;">🔒 Create Your Password</label>
    <input type="password" id="password" placeholder="At least 8 characters" required>

    <!-- Promo Code (Optional) -->
    <label for="promo" style="margin-top: 20px;">🎁 Promo Code (Optional)</label>
    <input type="text" id="promo" placeholder="BESTOFFER">

    <!-- Submit Button -->
    <button type="submit" class="glow-btn" style="margin-top: 30px;">Continue ➡️</button>
  </form>

  <!-- Back to Login -->
  <p style="margin-top: 20px; font-size: 0.9rem; color: #ccc;">
    Already have an account? 
    <a href="login.html" style="color: #0CC7F6; text-decoration: underline;">Login Here</a>
  </p>
</div>

<!-- Particles.js Background -->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>

<!-- Toast Notifications (for success/error messages) -->
<script src="JS/toast.js"></script>

<!-- Signup Form Handling Script -->
<script>
// Initialize Particles
particlesJS('particles-js', {
  "particles": {
    "number": { "value": 80, "density": { "enable": true, "value_area": 800 }},
    "color": { "value": "#0CC7F6" },
    "shape": { "type": "circle" },
    "opacity": { "value": 0.4, "random": true },
    "size": { "value": 3, "random": true },
    "line_linked": { "enable": true, "distance": 150, "color": "#0CC7F6", "opacity": 0.3, "width": 1 },
    "move": { "enable": true, "speed": 1 }
  },
  "interactivity": {
    "events": { "onhover": { "enable": true, "mode": "grab" }},
    "modes": { "grab": { "distance": 180, "line_linked": { "opacity": 0.6 }}}
  },
  "retina_detect": true
});

// Signup Form Submission
function submitForm() {
  // Collect input values
  const username = document.getElementById('username').value.trim();
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value.trim();
  const promoCode = document.getElementById('promo').value.trim();
  let startingBalance = 0;

  // Validate required fields
  if (!username || !email || !password) {
    showToast('❌ Please fill in all required fields.', 'error');
    return;
  }

  // Promo Code Check
  if (promoCode.toUpperCase() === "BESTOFFER" || promoCode.toUpperCase() === "PLAY5") {
    startingBalance = 5; // Give $5 bonus
    showToast('🎉 Promo code applied! You earned $5!');
  }

  // Load users from localStorage
  let users = JSON.parse(localStorage.getItem('users')) || [];

  // Check if username already exists
  const existingUser = users.find(u => u.username.toLowerCase() === username.toLowerCase());
  if (existingUser) {
    showToast('❌ Username already taken.', 'error');
    return;
  }

  // Save new user
  users.push({
    username: username,
    email: email,
    balance: startingBalance,
    password: password
  });

  // Save back to localStorage
  localStorage.setItem('users', JSON.stringify(users));
  localStorage.setItem('currentUser', username);

  showToast('✅ Account Created Successfully!');

  // Redirect after short delay
  setTimeout(() => {
    window.location.href = 'success.html';
  }, 1000);
}
</script>

<!-- Internal Styling for Landing Page (optional extra) -->
<style>
.welcome-text {
  font-size: 2rem;
  color: #0CC7F6;
  margin: 20px 0;
  animation: fadeIn 1.5s ease forwards;
}

.subtitle-text {
  font-size: 1.2rem;
  margin-bottom: 20px;
  color: #FFC857;
  animation: fadeIn 2s ease forwards;
}

/* Fade In Animation */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>

</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DAP⚡Pay - Login</title>
  <link rel="stylesheet" href="CSS/style.css">
</head>
<body>

<div id="particles-js"></div>

<div class="card">
  <div class="dap-logo">DAP⚡Pay</div>

  <h2>Welcome Back</h2>

  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  
  <button onclick="login()">Login</button>

  <p style="margin-top: 15px;">Don't have an account? <a href="signup.html" style="color: #0CC7F6;">Sign Up</a></p>
</div>

<!-- Particles -->
<script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
<!-- Toast system -->
<script src="JS/toast.js"></script>

<script>
particlesJS('particles-js', {
  "particles": {
    "number": { "value": 80, "density": { "enable": true, "value_area": 800 }},
    "color": { "value": "#0CC7F6" },
    "shape": { "type": "circle" },
    "opacity": { "value": 0.4, "random": true },
    "size": { "value": 3, "random": true },
    "line_linked": { "enable": true, "distance": 150, "color": "#0CC7F6", "opacity": 0.3, "width": 1 },
    "move": { "enable": true, "speed": 1.2 }
  },
  "interactivity": {
    "events": { "onhover": { "enable": true, "mode": "grab" }, "onclick": { "enable": true, "mode": "push" }},
    "modes": { "grab": { "distance": 200, "line_linked": { "opacity": 0.6 }}}
  },
  "retina_detect": true
});

function login() {
  const usernameInput = document.getElementById('username').value.trim();
  const passwordInput = document.getElementById('password').value.trim();

  let users = JSON.parse(localStorage.getItem('users')) || [];

  const foundUser = users.find(u => u.username.toLowerCase() === usernameInput.toLowerCase() && u.password === passwordInput);

  if (foundUser) {
    localStorage.setItem('currentUser', foundUser.username); // ✅ Save active user
    showToast('✅ Login Successful!');
    setTimeout(() => {
      window.location.href = 'dashboard.html';
    }, 1000);
  } else {
    showToast('❌ Invalid Credentials.', 'error');
  }
}

</script>

</body>
</html>
